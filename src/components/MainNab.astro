---
import Image from "astro/components/Image.astro"
import logo from "../assets/logo.png"
---

<nav class="fixed w-full bg-white/80 backdrop-blur-sm shadow-sm z-50 transition-all duration-300" id="mainNav">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-20">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <Image src={logo} alt="tastyFood" class="h-12 w-auto" />
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center space-x-8">
        <a href="#" class="nav-link">Home</a>
        
        <!-- Menu Dropdown -->
        <div class="relative group">
          <button class="nav-link group inline-flex items-center">
            Menu
            <svg class="ml-1 h-4 w-4 transition-transform duration-200 group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="absolute left-0 mt-2 w-48 rounded-md shadow-lg bg-white/90 backdrop-blur-sm opacity-0 translate-y-2 invisible group-hover:opacity-100 group-hover:translate-y-0 group-hover:visible transition-all duration-300">
            <div class="py-1">
              <a href="#" class="dropdown-item">Link 1</a>
              <a href="#" class="dropdown-item">Link 2</a>
              <a href="#" class="dropdown-item">Link 3</a>
            </div>
          </div>
        </div>

        <a href="#" class="nav-link">Order Food</a>
        
        <!-- Blog Dropdown -->
        <div class="relative group">
          <button class="nav-link group inline-flex items-center">
            Blog
            <svg class="ml-1 h-4 w-4 transition-transform duration-200 group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="absolute left-0 mt-2 w-48 rounded-md shadow-lg bg-white/90 backdrop-blur-sm opacity-0 translate-y-2 invisible group-hover:opacity-100 group-hover:translate-y-0 group-hover:visible transition-all duration-300">
            <div class="py-1">
              <a href="#" class="dropdown-item">Link 1</a>
              <a href="#" class="dropdown-item">Link 2</a>
              <a href="#" class="dropdown-item">Link 3</a>
            </div>
          </div>
        </div>

        <!-- Pages Dropdown -->
        <div class="relative group">
          <button class="nav-link group inline-flex items-center">
            Pages
            <svg class="ml-1 h-4 w-4 transition-transform duration-200 group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="absolute left-0 mt-2 w-48 rounded-md shadow-lg bg-white/90 backdrop-blur-sm opacity-0 translate-y-2 invisible group-hover:opacity-100 group-hover:translate-y-0 group-hover:visible transition-all duration-300">
            <div class="py-1">
              <a href="#" class="dropdown-item">Link 1</a>
              <a href="#" class="dropdown-item">Link 2</a>
              <a href="#" class="dropdown-item">Link 3</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact and Cart -->
      <div class="hidden md:flex items-center space-x-6">
        <img src="/contactNo.png" alt="Contact" class="h-8 w-auto" />
        <a href="#" class="inline-flex items-center justify-center h-10 w-10 rounded-full border border-gray-300 hover:border-gray-400 transition-colors duration-200">
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
          </svg>
        </a>
        <a href="#" class="inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-full text-white bg-red-600 hover:bg-red-700 transition-colors duration-200">
          Order Online
        </a>
      </div>

      <!-- Mobile menu button -->
    <div class="hamburger">
      <label class="hamburger">
        <input class="mobile-menu-button" type="checkbox">
        <svg viewBox="0 0 32 32">
          <path class="line line-top-bottom" d="M27 10 13 10C10.8 10 9 8.2 9 6 9 3.5 10.8 2 13 2 15.2 2 17 3.8 17 6L17 26C17 28.2 18.8 30 21 30 23.2 30 25 28.2 25 26 25 23.8 23.2 22 21 22L7 22"></path>
          <path class="line" d="M7 16 27 16"></path>
        </svg>
      </label>
    </div>
    </div>
  </div>

  <!-- Mobile menu -->
  <div class="hidden md:hidden" id="mobile-menu">
    
    <div class="px-2 pt-2 pb-3 space-y-1">
      <a href="#" class="mobile-nav-link">Home</a>
      <a href="#" class="mobile-nav-link">Menu</a>
      <a href="#" class="mobile-nav-link">Order Food</a>
      <a href="#" class="mobile-nav-link">Blog</a>
      <a href="#" class="mobile-nav-link">Pages</a>
    </div>
  </div>
</nav>

<style>
  .hamburger {
  cursor: pointer;
}

.hamburger input {
  display: none;
}

.hamburger svg {
  /* The size of the SVG defines the overall size */
  height: 3em;
  /* Define the transition for transforming the SVG */
  transition: transform 600ms cubic-bezier(0.4, 0, 0.2, 1);
}

.line {
  fill: none;
  stroke: black;
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-width: 3;
  /* Define the transition for transforming the Stroke */
  transition: stroke-dasharray 600ms cubic-bezier(0.4, 0, 0.2, 1),
              stroke-dashoffset 600ms cubic-bezier(0.4, 0, 0.2, 1);
}

.line-top-bottom {
  stroke-dasharray: 12 63;
}

.hamburger input:checked + svg {
  transform: rotate(-45deg);
}

.hamburger input:checked + svg .line-top-bottom {
  stroke-dasharray: 20 300;
  stroke-dashoffset: -32.42;
}

  /* Base styles that can't be handled by Tailwind */
  .nav-link {
    @apply text-gray-700 hover:text-gray-900 px-3 py-2 text-sm font-medium transition-colors duration-200;
  }
  
  .dropdown-item {
    @apply block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-150;
  }
  
  .mobile-nav-link {
    @apply block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors duration-200;
  }
</style>

<script>
  // Handle mobile menu toggle
  const mobileMenuButton = document.querySelector('.mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');

  mobileMenuButton?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  // Handle navbar transparency on scroll
  let lastScroll = 0;
  const navbar = document.getElementById('mainNav');

  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;
    
    if (currentScroll <= 0) {
      navbar?.classList.remove('bg-white/80');
      navbar?.classList.add('bg-transparent');
    } else {
      navbar?.classList.remove('bg-transparent');
      navbar?.classList.add('bg-white/80');
    }

    lastScroll = currentScroll;
  });
</script>